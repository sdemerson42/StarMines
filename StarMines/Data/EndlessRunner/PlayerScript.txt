let ground 1;
setDir 0 1;
setSpeed 40;

def A;
letInputAxis x y u v;
if bColFlag == 1 @normalInput;
let y 0;
def normalInput;
if y < (0-30) or ground == 0 ^subJump;
let bColFlag 0;
letPos i j;
if j > 600 @die;
pause;
jump @A;



def subJump;
if ground == 1 ^initJump;
letSpeed sp;
dec sp 1;
setSpeed sp;
retSub;


def initJump;
let ground 0;
setDir 0 (0-1);
setSpeed 40;
playAnim "jump";
retSub;



def collision;
ifCallerTag "Block" @blockCollide;
pause;
jump @A;

def blockCollide;
let bColFlag 1;
if ground == 0 ^groundReset;
setDir 0 1;
pause;
jump @A;

def groundReset;
let ground 1;
playAnim "right";
setDir 0 1;
setSpeed 40;
retSub;

def die;
lock;
despawn;
sendToTag "Logic" "endgame";
sleep;